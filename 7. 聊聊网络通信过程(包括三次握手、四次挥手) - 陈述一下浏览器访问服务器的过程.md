### 1. 解析域名：
(1) 浏览器端输入网址（域名）

(2) 检查是否知道默认网关的mac地址，如果不知道，则发送arp广播得到默认网关(路由器)的mac地址

(3) 得到默认网关的mac地址后发送一个域名解析的请求，经过默认网关进入互联网，经过层层转发，最终到达dns服务器

(4) dns服务器 解析得到该域名对应的ip地址，并返回给浏览器

### 2. 与http服务器建立tcp连接
  - **即浏览器通过默认网关把数据最终转发给http服务器，经过3次握手建立连接**

(1) 浏览器发送一个SYN置位的TCP报文给服务端，其中包含一个初始序列号n,服务端收到信息;

(2) 服务器收到信息后，会向客户端发送一个SYN和ACK都置位的TCP报文，其中包含服务器选择的初始序列号m和对客户端的序列号的确认n+1;

(3) 浏览器收到服务端的消息后，向服务端返回一个确认号m+1的ACK报文.

至此，三次握手完成，六篮球但可以和服务端进行数据通信。


### 3. 向http服务器发送包含请求报文的数据包以及等待服务器的应答
### 4. 与http服务器断开连接，即4次挥手
(1) 浏览器执行tcp套接字的关闭操作，并向服务器通知已关闭 （第一次挥手）

(2) 服务器接到来自浏览器的信息后，立即做出已收到通知的回应，同时对套接字的recv()方法解阻塞 （第二次挥手）

(3) 服务器解阻塞后，会立即执行套接字的close()方法，并向浏览器通知已关闭 （第三次握手）

(4) 浏览器收到来自服务器的通知后，会立即回应服务器已收到通知（第四次挥手），此后浏览器端会等待两个最大报文时间后释放相应资源。


* tip:(last 2 minutes)

### 5. 来源于网络对三次握手与四次挥手的解释
```
1. TCP握手的意义（目的）：

三次握手的目的是同步连接双方的序列号和确认号并交换 TCP 窗口大小信息。

2. 建立连接的过程：

TCP 连接是通过三次握手进行初始化的。三次握手的目的是同步连接双方的序列号和确认号并交换 TCP 窗口大小信息。以下步骤概述了通常情况下客户端计算机联系服务器计算机的过程：
1. 客户端向服务器发送一个SYN置位的TCP报文，其中包含连接的初始序列号x和一个窗口大小（表示客户端上用来存储从服务器发送来的传入段的缓冲区的大小）。
2. 服务器收到客户端发送过来的SYN报文后，向客户端发送一个SYN和ACK都置位的TCP报文，其中包含它选择的初始序列号y、对客户端的序列号的确认x+1和一个窗口大小（表示服务器上用来存储从客户端发送来的传入段的缓冲区的大小）。
3. .客户端接收到服务器端返回的SYN+ACK报文后，向服务器端返回一个确认号y+1和序号x+1的ACK报文，一个标准的TCP连接完成。


3.  TCP连接断开过程：

(1) 假设Client端发起中断连接请求，也就是发送FIN报文。
(2) Server端接到FIN报文后，意思是说"我Client端没有数据要发给你了"，但是如果你还有数据没有发送完成，则不必急着关闭Socket，可以继续发送数据。所以你先发送ACK，"告诉Client端，你的请求我收到了，但是我还没准备好，请继续你等我的消息"。
(3) 这个时候Client端就进入FIN_WAIT状态，继续等待Server端的FIN报文。
当Server端确定数据已发送完成，则向Client端发送FIN报文，"告诉Client端，好了，我这边数据发完了，准备好关闭连接了"。
(4) Client端收到FIN报文后，"就知道可以关闭连接了，但是他还是不相信网络，怕Server端不知道要关闭，所以发送ACK后进入TIME_WAIT状态，如果Server端没有收到ACK则可以重传。“，Server端收到ACK后，"就知道可以断开连接了"。
Client端等待了2MSL后依然没有收到回复，则证明Server端已正常关闭，那好，我Client端也可以关闭连接了。Ok，TCP连接就这样关闭了！
--------------------- 
作者：tensorzhl 
来源：CSDN 
原文：https://blog.csdn.net/tensorzhl/article/details/75797364 
版权声明：本文为博主原创文章，转载请附上博文链接！
```
