> 正则表达式的作用是什么？

> 答：从字符串中匹配特定的子串

[TOC]

### 1. 匹配单个字符

字符 | 功能
---|---
. | 匹配任意1个字符（除了\n）
[] | 匹配[]中列举的字符
\d | 匹配数字 0-9
\D | 匹配非数字
\s | 匹配空白，即 空格、tab键
\S | 匹配非空白
\w | 匹配单词字符(a-z,A-Z,0-9,_)，其实也可以匹配汉字
\W | 匹配非单词字符

* demo
```python
import re  # 引入re模块，用于提供正则匹配的api

'''
------------------------------------------
. -> 匹配任意1个字符（除了\n）
'''
ret = re.match('.', 'M').group()  # re模块的一个方法match(),后面会细讲，先通过代码学习它的用法
print(ret)  # M

ret = re.match('a.b', 'amb').group()
print(ret)  # amb

'''
--------------------------------------------
[] -> 匹配[]中列举的字符
'''
ret = re.match('[0-9]', '3').group()  # 匹配0-9中的任意一个数值
print(ret)  # 3

ret re.match('[0-9a-z]{2}', 'a3').group()  # 匹配0-9，a-z中的任意两个字符
print(ret)  # a3

'''
--------------------------------------------
\d -> 匹配0-9的任意数值
'''
ret = re.match('\d+', '12341sdfasf').group()  # 匹配1个或多个数值字符
print(ret) # 12341

# 其他几个在后面在举例
```

### 2. 匹配多个字符

字符 | 功能
---|---
* | 匹配前一个字符出现次数0次或者多次，即可有可无
+ | 匹配前一个字符出现1次或者多次，即至少有一次
? | 匹配前一个字符0次或1次
{m} | 匹配前一个字符m次
{m,} | 匹配前一个字符至少m次
{m,n} | 匹配前一个字符至少m次，至多n次

* demo
```python
import re

'''
------------------------------------------------
* -> 匹配前一个字符出现次数0次或者多次，即可有可无
'''
ret = re.match('[a-zA-Z]*', 'FASDaaa555asdfa').group()  # 匹配a-zA-Z0次或多次
print(ret)  # FASDaaa

'''
------------------------------------------------
+ -> 匹配前一个字符出现1次或者多次，即至少有一次
'''
# 匹配出，变量名是否有效
names = ["name1", "_name", "2_name", "__name__"]

for name in names:
    ret = re.match("[a-zA-Z_]+[\w]*",name)
    if ret:
        print("变量名 %s 符合要求" % ret.group())
    else:
        print("变量名 %s 非法" % name)

运行结果：
# 变量名 name1 符合要求
# 变量名 _name 符合要求
# 变量名 2_name 非法
# 变量名 __name__ 符合要求

'''
-----------------------------------------------
? -> 匹配前一个字符0次或1次
'''
# 匹配出，0到99之间的数字
ret = re.match("[1-9]?\d","33")
print(ret.group()) # 33

'''
----------------------------------------------
{m} -> 匹配前一个字符m次
'''
# 匹配出，8到20位的密码，可以是大小写英文字母、数字、下划线
ret = re.match("[a-zA-Z0-9_]{8,20}","1ad12f23s34455ff66")
print(ret.group()) # 1ad12f23s34455ff66

# 剩余的后面会有案例
```

### 3. 匹配开头结尾

字符 | 功能
---|---
^ | 匹配字符串开头
$ | 匹配字符串结尾

* demo
```python
'''
---------------------------------------------------------
$ -> 匹配结尾
'''
# 检查字符串是否合法
email_list = ["xiaoWang@163.com", "xiaoWang@163.comheihei", ".com.xiaowang@qq.com"]

for email in email_list:
    ret = re.match("[\w]{4,20}@163\.com$", email)
    if ret:
        print("%s 是符合规定的邮件地址,匹配后的结果是:%s" % (email, ret.group()))
    else:
        print("%s 不符合要求" % email)

# 输出结果
# xiaoWang@163.com 是符合规定的邮件地址,匹配后的结果是:xiaoWang@163.com
# xiaoWang@163.comheihei 不符合要求
# .com.xiaowang@qq.com 不符合要求

'''
---------------------------------------------------------
^ -> 匹配开头, 它的demo先省略，后面会有demo
'''
```

### 4. 匹配分组

字符 | 功能
---|---
\| | 匹配左右任意一个表达式
(ab) | 将括号中字符作为一个分组
\num | 引用分组num匹配到的字符串
(?P<name>) | 分组起别名
(?P=name) | 引用别名为name分组匹配到的字符串

* demo
```python
'''
----------------------------------------------
| -> 匹配左右任意一个表达式
'''
# 匹配0-100
ret = re.match("[1-9]?\d$|100","8")
print(ret.group())

'''
----------------------------------------------
| -> 将括号中字符作为一个分组
'''
匹配出163、126、qq邮箱
ret = re.match("\w{4,20}@(163|126|qq)\.com", "test@gmail.com")
if ret:
    print(ret.group())
else:
    print("不是163、126、qq邮箱")  # 不是163、126、qq邮箱

# 后面三个不常用
ret = re.match(r"<(?P<name1>\w*)><(?P<name2>\w*)>.*</(?P=name2)></(?P=name1)>", "<html><h1>this is a re-test</h2></html>")
ret.group()  # <html><h1>this is a re-test</h2></html>
```
* 注意：(?P<name>)和(?P=name)中的字母P大写

### 5. re模块及其常用方法

| 方法    | 功能                                                         |
| ------- | ------------------------------------------------------------ |
| match   | 从头开始匹配                                                 |
| search  | 搜索匹配到的字符，匹配到第一个就停止搜索                     |
| findall | 全局搜索匹配到的字符，并以列表的形式返回全部匹配的内容,语法格式：ret = re.findall(r'\d+','lkeu:9697,keiake:7397') |
| sub     | 全局替换匹配到的内容，语法格式：ret = re.sub(r'\d+', '*', 'lkeu:9697,keiake:7397') |
| split   | 根据匹配进行切割字符串，并返回一个列表,语法格式：ret = re.split(r":\| “，”info:zhangsan 937024 shandong“) |

### 6. 贪婪性

```
Python里数量词默认是贪婪的（在少数语言里也可能是默认非贪婪），总是尝试匹配尽可能多的字符；

非贪婪则相反，总是尝试匹配尽可能少的字符。

在"*","?","+","{m,n}"后面加上？，使贪婪变成非贪婪。
```

### 7. `r` 的作用

```
Python中字符串前面加上 r 表示原生字符串
```

